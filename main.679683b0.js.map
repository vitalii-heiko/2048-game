{"version":3,"sources":["scripts/main.js"],"names":["button","document","querySelector","messageStart","messageWin","messageLose","gameScore","rows","querySelectorAll","score","startButtonPressed","gameField","setGameField","row","cell","children","textContent","className","classList","remove","hasEmptyCell","canMove","setTwoOrFour","Math","floor","random","filteringZero","filter","num","slide","filteredRow","i","length","push","slideLeft","r","slideRight","reverse","slideUp","c","column","slideDown","srartGame","replace","add","restartGame","addEventListener","e","key"],"mappings":";AAAA,aAEA,IAAMA,EAASC,SAASC,cAAc,WAChCC,EAAeF,SAASC,cAAc,kBACtCE,EAAaH,SAASC,cAAc,gBACpCG,EAAcJ,SAASC,cAAc,iBACrCI,EAAYL,SAASC,cAAc,eACnCK,EAAON,SAASO,iBAAiB,cAEnCC,EAAQ,EACRC,GAAqB,EACrBC,EAAY,CACd,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAGZ,SAASC,IACF,IAAA,IAAIC,EAAM,EAAGA,EAAM,EAAGA,IACpB,IAAA,IAAIC,EAAO,EAAGA,EAAO,EAAGA,IAC3BP,EAAKM,GAAKE,SAASD,GAAME,YAAcL,EAAUE,GAAKC,IAAS,GAE/DP,EAAKM,GAAKE,SAASD,GAAMG,UACKN,0BAAAA,OAAAA,EAAUE,GAAKC,IAEhB,OAAzBH,EAAUE,GAAKC,IACjBV,EAAWc,UAAUC,OAAO,UAMpC,SAASC,IACF,IAAA,IAAIP,EAAM,EAAGA,EAAM,EAAGA,IACpB,IAAA,IAAIC,EAAO,EAAGA,EAAO,EAAGA,IACvBH,GAAyB,IAAzBA,EAAUE,GAAKC,GACV,OAAA,EAKN,OAAA,EAGT,SAASO,IACF,IAAA,IAAIR,EAAM,EAAGA,EAAM,EAAGA,IACpB,IAAA,IAAIC,EAAO,EAAGA,EAAO,EAAGA,IACvBH,GAAAA,EAAUG,GAAMD,KAASF,EAAUG,EAAO,GAAGD,IAC5CF,EAAUE,GAAKC,KAAUH,EAAUE,GAAKC,EAAO,GAC3C,OAAA,EAKN,OAAA,EAGT,SAASQ,IACH,GAACD,KAAcD,IAAf,CAMEP,IAAAA,EAAMU,KAAKC,MAAsB,EAAhBD,KAAKE,UACtBX,EAAOS,KAAKC,MAAsB,EAAhBD,KAAKE,UAEzBL,IAAAA,KAA2C,IAAzBT,EAAUE,GAAKC,GAG5BQ,OAAAA,IAFPX,EAAUE,GAAKC,GAAQS,KAAKC,MAAMD,KAAKE,UAAY,GAAM,EAAI,GAK/Db,SAdEP,EAAYa,UAAUC,OAAO,UAiBjC,SAASO,EAAcb,GACdA,OAAAA,EAAIc,OAAO,SAAAC,GAAOA,OAAQ,IAARA,IAG3B,SAASC,EAAMhB,GAGR,IAFDiB,IAAAA,EAAcJ,EAAcb,GAEvBkB,EAAI,EAAGA,EAAID,EAAYE,OAAS,EAAGD,IACtCD,EAAYC,KAAOD,EAAYC,EAAI,KACrCD,EAAYC,IAAM,EAClBD,EAAYC,EAAI,GAAK,EACrBtB,GAASqB,EAAYC,IAKlBD,IAFPA,EAAcJ,EAAcI,GAErBA,EAAYE,OAAS,GAC1BF,EAAYG,KAAK,GAGZH,OAAAA,EAGT,SAASI,IACF,IAAA,IAAIC,EAAI,EAAGA,EAAIxB,EAAUqB,OAAQG,IAAK,CACrCtB,IAAAA,EAAMF,EAAUwB,GAEpBtB,EAAMgB,EAAMhB,GACZF,EAAUwB,GAAKtB,EAGjBD,IAGF,SAASwB,IACF,IAAA,IAAID,EAAI,EAAGA,EAAIxB,EAAUqB,OAAQG,IAAK,CACrCtB,IAAAA,EAAMF,EAAUwB,GAAGE,UAEvBxB,EAAMgB,EAAMhB,GACZF,EAAUwB,GAAKtB,EAAIwB,UAGrBzB,IAGF,SAAS0B,IACF,IAAA,IAAIC,EAAI,EAAGA,EAAI5B,EAAUqB,OAAQO,IAAK,CACrCC,IAAAA,EAAS,CACX7B,EAAU,GAAG4B,GACb5B,EAAU,GAAG4B,GACb5B,EAAU,GAAG4B,GACb5B,EAAU,GAAG4B,IAGfC,EAASX,EAAMW,GAEV,IAAA,IAAIL,EAAI,EAAGA,EAAIxB,EAAUqB,OAAQG,IACpCxB,EAAUwB,GAAGI,GAAKC,EAAOL,GAI7BvB,IAGF,SAAS6B,IACF,IAAA,IAAIF,EAAI,EAAGA,EAAI5B,EAAUqB,OAAQO,IAAK,CACrCC,IAAAA,EAAS,CACX7B,EAAU,GAAG4B,GACb5B,EAAU,GAAG4B,GACb5B,EAAU,GAAG4B,GACb5B,EAAU,GAAG4B,IAGfC,EAAOH,WACPG,EAASX,EAAMW,IACRH,UAEF,IAAA,IAAIF,EAAI,EAAGA,EAAIxB,EAAUqB,OAAQG,IACpCxB,EAAUwB,GAAGI,GAAKC,EAAOL,GAI7BvB,IAGF,SAAS8B,IACP1C,EAAOgB,YAAc,UACrBhB,EAAOkB,UAAUyB,QAAQ,QAAS,WAClCxC,EAAae,UAAU0B,IAAI,UAC3BxC,EAAWc,UAAU0B,IAAI,UACzBvC,EAAYa,UAAU0B,IAAI,UAC1BlC,GAAqB,EACrBY,IACAA,IAGF,SAASuB,IACPlC,EAAY,CACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAEZF,EAAQ,EACRH,EAAUU,YAAcP,EACxBJ,EAAYa,UAAU0B,IAAI,UAE1BtB,IACAA,IAGFtB,EAAO8C,iBAAiB,QAAS,WACJ,UAAvB9C,EAAOgB,YACT0B,IACgC,YAAvB1C,EAAOgB,aAChB6B,IAEFpC,EAAQ,IAGVR,SAAS6C,iBAAiB,QAAS,SAACC,GAC9BrC,GAAAA,EACMqC,OAAAA,EAAEC,KACH,IAAA,UACHV,IACAhB,IAEA,MACG,IAAA,YACHmB,IACAnB,IAEA,MAEG,IAAA,aACHc,IACAd,IAEA,MAEG,IAAA,YACHY,IACAZ,IAMNhB,EAAUU,YAAcP","file":"main.679683b0.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst button = document.querySelector('.button');\nconst messageStart = document.querySelector('.message-start');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\nconst gameScore = document.querySelector('.game-score');\nconst rows = document.querySelectorAll('.field-row');\n\nlet score = 0;\nlet startButtonPressed = false;\nlet gameField = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nfunction setGameField() {\n  for (let row = 0; row < 4; row++) {\n    for (let cell = 0; cell < 4; cell++) {\n      rows[row].children[cell].textContent = gameField[row][cell] || '';\n\n      rows[row].children[cell].className\n        = `field-cell field-cell--${gameField[row][cell]}`;\n\n      if (gameField[row][cell] === 2048) {\n        messageWin.classList.remove('hidden');\n      };\n    }\n  }\n};\n\nfunction hasEmptyCell() {\n  for (let row = 0; row < 4; row++) {\n    for (let cell = 0; cell < 4; cell++) {\n      if (gameField[row][cell] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction canMove() {\n  for (let row = 0; row < 4; row++) {\n    for (let cell = 0; cell < 3; cell++) {\n      if (gameField[cell][row] === gameField[cell + 1][row]\n        || gameField[row][cell] === gameField[row][cell + 1]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction setTwoOrFour() {\n  if (!canMove() && !hasEmptyCell()) {\n    messageLose.classList.remove('hidden');\n\n    return;\n  }\n\n  const row = Math.floor(Math.random() * 4);\n  const cell = Math.floor(Math.random() * 4);\n\n  if (hasEmptyCell() && gameField[row][cell] === 0) {\n    gameField[row][cell] = Math.floor(Math.random() >= 0.9 ? 4 : 2);\n  } else {\n    return setTwoOrFour();\n  }\n\n  setGameField();\n}\n\nfunction filteringZero(row) {\n  return row.filter(num => num !== 0);\n}\n\nfunction slide(row) {\n  let filteredRow = filteringZero(row);\n\n  for (let i = 0; i < filteredRow.length - 1; i++) {\n    if (filteredRow[i] === filteredRow[i + 1]) {\n      filteredRow[i] *= 2;\n      filteredRow[i + 1] = 0;\n      score += filteredRow[i];\n    }\n  }\n  filteredRow = filteringZero(filteredRow);\n\n  while (filteredRow.length < 4) {\n    filteredRow.push(0);\n  };\n\n  return filteredRow;\n}\n\nfunction slideLeft() {\n  for (let r = 0; r < gameField.length; r++) {\n    let row = gameField[r];\n\n    row = slide(row);\n    gameField[r] = row;\n  }\n\n  setGameField();\n}\n\nfunction slideRight() {\n  for (let r = 0; r < gameField.length; r++) {\n    let row = gameField[r].reverse();\n\n    row = slide(row);\n    gameField[r] = row.reverse();\n  }\n\n  setGameField();\n}\n\nfunction slideUp() {\n  for (let c = 0; c < gameField.length; c++) {\n    let column = [\n      gameField[0][c],\n      gameField[1][c],\n      gameField[2][c],\n      gameField[3][c],\n    ];\n\n    column = slide(column);\n\n    for (let r = 0; r < gameField.length; r++) {\n      gameField[r][c] = column[r];\n    }\n  }\n\n  setGameField();\n}\n\nfunction slideDown() {\n  for (let c = 0; c < gameField.length; c++) {\n    let column = [\n      gameField[0][c],\n      gameField[1][c],\n      gameField[2][c],\n      gameField[3][c],\n    ];\n\n    column.reverse();\n    column = slide(column);\n    column.reverse();\n\n    for (let r = 0; r < gameField.length; r++) {\n      gameField[r][c] = column[r];\n    }\n  }\n\n  setGameField();\n}\n\nfunction srartGame() {\n  button.textContent = 'Restart';\n  button.classList.replace('start', 'restart');\n  messageStart.classList.add('hidden');\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n  startButtonPressed = true;\n  setTwoOrFour();\n  setTwoOrFour();\n};\n\nfunction restartGame() {\n  gameField = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n  score = 0;\n  gameScore.textContent = score;\n  messageLose.classList.add('hidden');\n\n  setTwoOrFour();\n  setTwoOrFour();\n};\n\nbutton.addEventListener('click', () => {\n  if (button.textContent === 'Start') {\n    srartGame();\n  } else if (button.textContent === 'Restart') {\n    restartGame();\n  };\n  score = 0;\n});\n\ndocument.addEventListener('keyup', (e) => {\n  if (startButtonPressed) {\n    switch (e.key) {\n      case 'ArrowUp':\n        slideUp();\n        setTwoOrFour();\n\n        break;\n      case 'ArrowDown':\n        slideDown();\n        setTwoOrFour();\n\n        break;\n\n      case 'ArrowRight':\n        slideRight();\n        setTwoOrFour();\n\n        break;\n\n      case 'ArrowLeft':\n        slideLeft();\n        setTwoOrFour();\n\n        break;\n    }\n  }\n\n  gameScore.textContent = score;\n});\n"]}